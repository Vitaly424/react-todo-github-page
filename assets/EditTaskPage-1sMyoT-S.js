import{j as t,c as m,b as g,e as N,u as b,r as _,t as E,B as v,h as z,L as B}from"./index-mfVBA7S6.js";import{u as T,B as C,Q as y}from"./index.esm-C4XzDHb1.js";import{S as F}from"./react-select.esm-msWpYbQ9.js";const L="_title_1jkmg_1",P="_link_1jkmg_8",p={title:L,link:P},V="_form_no1zi_1",$="_input_no1zi_10",q="_textarea_no1zi_30",A="_inputError_no1zi_51",D="_btn_no1zi_66",O="_error_no1zi_71",a={form:V,input:$,textarea:q,inputError:A,btn:D,error:O},H="_StatusSelect_15op9_1",M={StatusSelect:H},h=[{value:"completed",label:"Завершена"},{value:"in-progress",label:"В процессе"}],Q=r=>{const{className:l,onChangeStatus:o,defaultValue:u}=r,e=h.find(i=>i.value===u),n=i=>{o==null||o(i)};return t.jsx(F,{className:m(M.StatusSelect,l),onChange:i=>n(i),options:h,defaultValue:e})},R=r=>{const{id:l}=r,o=g(N),u=b(),e=o.find(c=>c.id===l),[n,i]=_.useState(),{register:x,formState:{errors:s},setValue:d,handleSubmit:f}=T({mode:"onBlur"});if(_.useEffect(()=>{e&&(d("title",e.title),d("description",e.description))},[l,e,d,o]),!e)return t.jsx("h1",{children:"Ошибка"});const j=f(c=>{const k={id:l,title:c.title,description:c.description,status:(n==null?void 0:n.value)!==e.status&&n?n==null?void 0:n.value:e.status};u(E.updateTask(k)),C("Сохранено",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",type:"success"})}),S=c=>{i(c)};return t.jsxs("form",{className:a.form,onSubmit:j,children:[t.jsxs("div",{className:a.field,children:[t.jsx("input",{...x("title",{required:!0}),className:m(a.input,{[a.inputError]:s==null?void 0:s.title}),type:"text",placeholder:"Введите название"}),(s==null?void 0:s.title)&&t.jsx("span",{className:a.error,children:"Поле не может быть пустым"})]}),t.jsxs("div",{className:a.field,children:[t.jsx("textarea",{...x("description",{required:!0}),className:m(a.textarea,{[a.inputError]:s==null?void 0:s.description}),name:"description",placeholder:"Введите описание"}),(s==null?void 0:s.description)&&t.jsx("span",{className:a.error,children:"Поле не может быть пустым"})]}),t.jsx(Q,{defaultValue:e.status,onChangeStatus:S}),t.jsx(v,{type:"submit",className:a.btn,children:"Сохранить"}),t.jsx(y,{})]})},J=()=>{const{id:r}=z();return r?t.jsxs(t.Fragment,{children:[t.jsx(B,{className:p.link,to:"/",children:"Вернуться на главную"}),t.jsx("h1",{className:p.title,children:"Редактировать задачу"}),t.jsx(R,{id:r})]}):t.jsx("h1",{className:p.title,children:"Задача не найдена"})};export{J as default};
